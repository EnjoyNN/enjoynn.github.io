function testWebP(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))&&0==t.toDataURL("image/webp").indexOf("data:image/webp")}function ibg(){$.each($(".ibg"),(function(t,e){$(this).find("picture").length>0?$("body").hasClass("webp")?$(this).css("background-image",'url("'+$(this).find("source").attr("srcset")+'")'):$(this).css("background-image",'url("'+$(this).find("img").attr("src")+'")'):$(this).find("img").length>0&&$(this).css("background-image",'url("'+$(this).find("img").attr("src")+'")')}))}function submitForm(){const t=$("#name").val(),e=$("#phone").val(),s=$("#message").val();$.ajax({type:"POST",url:"phpmail.php",data:"name="+t+"&phone="+e+"&message="+s,success:function(t){"success"==t?formSuccess():(formError(),submitMsg(!1,t))}})}function formSuccess(){$("#form")[0].reset(),submitMsg(!0,"Сообщение отправлено!")}function formError(){submitMsg(!1,"Произошла ошибка")}function submitMsg(t,e){if(t)var s="success-message";else s="error-message";$("#msgSubmit").removeClass().addClass(s).text(e)}$(document).ready((function(){testWebP()?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp"),ibg()})),document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementsByTagName("INPUT");t+=document.getElementsByTagName("TEXTAREA");for(var e=0;e<t.length;e++)t[e].oninvalid=function(t){t.target.setCustomValidity(""),t.target.validity.valid||t.target.setCustomValidity("Это поле обязательно для заполнения")},t[e].oninput=function(t){t.target.setCustomValidity("")}})),$("#form").on("submit",(function(t){$("#msgSubmit").text(""),1==$(this)[0].checkValidity()?(t.preventDefault(),submitForm()):(t.preventDefault(),t.stopPropagation())}));